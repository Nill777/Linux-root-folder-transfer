# Как перенести корневую папку Linux на другой диск

Поскольку все данные, настройки и объекты операционной системы Linux - это файлы, то вы можете перенести свою операционную систему куда нужно, просто скопировав все нужные файлы. В Windows так же просто не получится, так, как там более сложная файловая система со сложными зависимостями.

## 1. Подготовка к переносу
Сначала создайте LiveCD диск и загрузитесь с него, тогда точно все нужные данные будут сохранены.  
В папку **/mnt/source** примонтируйте раздел, на котором будет располагаться новая корневая папка Linux. Например, это **/dev/nvme0n1p4**:
```bash
$ sudo mount /dev/nvme0n1p4 /mnt/source
```
В папку **/mnt/destination** примонтируйте раздел, на котором будет располагаться новая корневая папка Linux. Например, это **/dev/sda2**:
```bash
$ sudo mount /dev/sdb2 /mnt/destination
```
## 2. Перенос утилитой cp
Теперь нужно рекурсивно скопировать все файлы из **/mnt/source** в **/mnt/destination**. Запустите сам перенос Linux на другой диск. Для этого запустите утилиту cp с опциями  **-r**, **-x** и **-a**. 
- **-r** рекурсивный обход файловой системы
- **-x** ограничивает рекурсию только текущей файловой системой
- **-a** включает сохранение исходных прав и метаданных файла

Точка в конце пути источника предотвратит создание в корне приёмника копии папки **source**. Это особенность команды **cp**.
```bash
$ sudo cp -rxa /mnt/source/. /mnt/destination
```
## 3. Правка fstab
Далее будем работать только с новой системой. Первым делом нужно исправить файл **/etc/fstab**, чтобы там был указан правильный UUID корневого раздела. Узнать UUID нужного раздела можно при помощи утилиты **gnome-disks**:
```bash
$ gnome-disks
```
![](./gnome-disks.png)
Замените полученным UUID, значение этого параметра корневого раздела в **/mnt/destination/etc/fstab**:
```bash
$ sudo gedit /mnt/destination/etc/fstab
```
![](./fstab.png)
## 4. Правка grub.cfg
Исправьте файл **/boot/grub/grub.cfg**, чтобы там был указан правильный UUID корневого раздела. Как узнать UUID указано выше (пункт 3). Замените полученным UUID, значение этого параметра корневого раздела в **/mnt/destination/boot/grub/grub.cfg** (порядка 14 замен требуется):
```bash
$ sudo gedit /mnt/destination/boot/grub/grub.cfg
```
![](./grub.cfg.png)
## 5. Перезагрузка
Перезагрузите компьютер. В BIOS вашего компьютера выберите диск, с которого вы обычно загружались, в качестве первого источника для загрузки (верните настройки BIOS в изначальное состояние). После загрузки вы будете уже в новом корневом каталоге и всегда сможете вернуться.
## Выводы
В этой статье мы разобрали, как перенести корневую папку Linux на другой диск с помощью утилиты cp. Как видите, это достаточно просто и быстро.
